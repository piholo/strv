<!-- Copia di landing.html con flag EPG opzionale -->
<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>StreamViX - EPG Opzionale</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body { font-family: Arial, sans-serif; background: #181c24; color: #fff; margin: 0; padding: 0; }
        .container { max-width: 600px; margin: 40px auto; background: #232a36; border-radius: 10px; box-shadow: 0 2px 8px #0008; padding: 32px; }
        h1 { text-align: center; }
        label { display: flex; align-items: center; margin: 16px 0; font-size: 1.1em; }
        input[type="checkbox"] { margin-right: 10px; }
        .links { margin-top: 32px; }
        .links a { display: block; color: #4fc3f7; margin: 8px 0; text-decoration: none; }
        .links a:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <div class="container">
        <h1>StreamViX (EPG Opzionale)</h1>
        <label>
            <input type="checkbox" id="epg-flag" checked>
            Abilita EPG (Guida programmi)
        </label>
        <div class="links">
            <a id="manifest-link" href="#">Manifest</a>
            <a id="catalog-link" href="#">Catalogo TV</a>
            <a id="meta-link" href="#">Meta esempio (RAI 1)</a>
            <a id="stream-link" href="#">Stream esempio (RAI 1)</a>
        </div>
        <p style="margin-top:32px;font-size:0.95em;color:#aaa;">Questa versione consente di abilitare o disabilitare la guida EPG per tutte le richieste.<br>Se disabilitata, la guida programmi non verrà caricata né mostrata.</p>
    </div>
    <script>
        // Salva e ripristina la scelta EPG
        const epgFlag = document.getElementById('epg-flag');
        epgFlag.checked = localStorage.getItem('epgEnabled') !== '0';
        epgFlag.addEventListener('change', () => {
            localStorage.setItem('epgEnabled', epgFlag.checked ? '1' : '0');
            updateLinks();
        });

        function getEpgParam() {
            return epgFlag.checked ? 'epg=1' : 'epg=0';
        }

        function updateLinks() {
            const base = window.location.origin;
            const epgParam = getEpgParam();
            document.getElementById('manifest-link').href = `${base}/manifest.json?${epgParam}`;
            document.getElementById('catalog-link').href = `${base}/catalog/tv/tv-channels?${epgParam}`;
            document.getElementById('meta-link').href = `${base}/meta/tv/tv:RAI%201?${epgParam}`;
            document.getElementById('stream-link').href = `${base}/stream/tv/tv:RAI%201?${epgParam}`;
        }

        updateLinks();
    </script>
</body>
</html> 
